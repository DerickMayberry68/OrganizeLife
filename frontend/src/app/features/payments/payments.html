<div class="payments">
  <ejs-appbar colorMode="Primary" cssClass="custom-appbar">
    <div class="appbar-title">
      üí≥ Payment History
    </div>
  </ejs-appbar>

  <div class="payments__stats">
    <app-stat-card
      title="Total Payments"
      [value]="totalPayments()"
      icon="üìã"
      variant="primary"
    />
    <app-stat-card
      title="Total Amount"
      [value]="formatCurrencyValue(totalAmount())"
      icon="üíµ"
      variant="success"
    />
    <app-stat-card
      title="Recent Payments"
      [value]="recentPayments().length"
      icon="‚è∞"
      variant="info"
    />
  </div>

  <div class="payments__content">
    <div class="widget">
      <div class="widget__header">
        <h5 class="widget__title">All Payments</h5>
      </div>
      <div class="widget__body">
        @if (!isLoading()) {
          <div class="card-content">
            <ejs-grid
              [dataSource]="payments()"
              [allowPaging]="true"
              [allowSorting]="true"
              [allowFiltering]="true"
              [pageSettings]="pageSettings"
              [filterSettings]="filterSettings"
              [toolbar]="toolbar"
            >
              <e-columns>
                <e-column field="paymentDate" headerText="Date" width="140" type="date" [valueAccessor]="formatDate"></e-column>
                <e-column field="amount" headerText="Amount" width="120" [valueAccessor]="formatCurrency" textAlign="Right"></e-column>
                <e-column field="paymentMethod" headerText="Method" width="150"></e-column>
                <e-column field="description" headerText="Description" width="250"></e-column>
                <e-column field="status" headerText="Status" width="120"></e-column>
              </e-columns>
            </ejs-grid>
          </div>
        } @else {
          <div class="loading-state">
            <div class="loading-spinner">‚è≥</div>
            <p>Loading payments...</p>
          </div>
        }
      </div>
    </div>
  </div>
</div>

